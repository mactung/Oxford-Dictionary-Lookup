import{c as v,r as a,j as e,V as G,X as de,L as fe,a as je,l as ve,g as we,S as te,T as Ne,s as ke,p as Se,b as ze,R as Ce}from"./index.js";import"./config.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=v("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=v("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=v("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=v("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=v("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=v("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=v("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=v("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=v("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=v("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=v("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=v("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=v("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=v("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=v("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=v("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function qe({vocabulary:m,onUpdateWord:z,onExit:h}){const[c,q]=a.useState([]),[u,y]=a.useState(0),[U,H]=a.useState(0),[L,W]=a.useState(!1),[C,E]=a.useState(null),[M,R]=a.useState(""),[Q,p]=a.useState(!1),[g,w]=a.useState(null),[N,re]=a.useState([]),[F,D]=a.useState(!1),I=a.useRef(null),B=a.useRef(null),_=a.useRef(new Set);a.useEffect(()=>{c.length===0&&m.length>0&&!F&&$()},[m]),a.useEffect(()=>{if(!F&&c.length>0&&!L){const o=c[u];o.type==="spelling"&&B.current&&B.current.focus(),(o.type==="audio-word"||o.type==="audio-meaning")&&o.audioUrl&&A(o.audioUrl)}},[u,c,L,F]);const A=o=>{I.current&&o&&(I.current.src=o,I.current.play().catch(i=>console.log("Audio play failed",i)))},O=o=>{const i=Date.now(),n=24*60*60*1e3;switch(o){case 0:return i+1*n;case 1:return i+3*n;case 2:return i+7*n;case 3:return i+14*n;default:return i+o*7*n}},$=(o=!1)=>{if(p(o),m.length<4)return;const i=Date.now();let n=m.filter(r=>r.nextReview?r.nextReview<=i:!0);if(o){const r=m.filter(f=>!n.includes(f)&&(f.srsLevel===0||!f.srsLevel)).sort((f,P)=>(f.nextReview||0)-(P.nextReview||0)),k=5-n.length;k>0&&(n=[...n,...r.slice(0,k)])}const b=n.slice(0,5);re(b),D(!0),W(!1);let x=[];b.forEach(r=>{const k=r.phonetics&&r.phonetics[0]&&r.phonetics[0].audioUrl,f=r.senses&&r.senses[0]?r.senses[0].definition:"No definition",P=m.filter(se=>se.headword!==r.headword);x.push({wordObj:r,type:"meaning",prompt:r.headword,correctAnswer:f,options:[f,...T(P,3,"definition")].sort(()=>.5-Math.random())}),x.push({wordObj:r,type:"spelling",prompt:f,correctAnswer:r.headword,options:[]}),k&&x.push({wordObj:r,type:"audio-word",audioUrl:r.phonetics[0].audioUrl,prompt:"Listen and match the word",correctAnswer:r.headword,options:[r.headword,...T(P,3,"headword")].sort(()=>.5-Math.random())}),k&&x.push({wordObj:r,type:"audio-meaning",audioUrl:r.phonetics[0].audioUrl,prompt:"Listen and choose the meaning",correctAnswer:f,options:[f,...T(P,3,"definition")].sort(()=>.5-Math.random())}),k&&r.phonetics&&r.phonetics[0]&&r.phonetics[0].ipa&&x.push({wordObj:r,type:"ipa",audioUrl:r.phonetics[0].audioUrl,prompt:`How is "${r.headword}" pronounced?`,correctAnswer:r.phonetics[0].ipa,options:[r.phonetics[0].ipa,...T(P,3,"ipa")].sort(()=>.5-Math.random())})}),x=x.sort(()=>.5-Math.random()),x.length>0?(q(x),y(0),H(0),E(null),R(""),w(null),_.current.clear()):(q([]),D(!1))},K=()=>{D(!1)},T=(o,i,n)=>{const b=x=>{var r,k,f,P;return n==="definition"?((k=(r=x.senses)==null?void 0:r[0])==null?void 0:k.definition)||"No def":n==="ipa"?((P=(f=x.phonetics)==null?void 0:f[0])==null?void 0:P.ipa)||"/.../":x[n]};return o.sort(()=>.5-Math.random()).slice(0,i).map(b)},Y=o=>{const i=c[u],n=i.wordObj.headword;if(o)if(H(b=>b+1),w("correct"),_.current.has(n))z({...i.wordObj,srsLevel:0,nextReview:O(0)});else{const x=(i.wordObj.srsLevel||0)+1;z({...i.wordObj,srsLevel:x,nextReview:O(x)})}else _.current.add(n),w("incorrect"),z({...i.wordObj,srsLevel:0,nextReview:O(0)});setTimeout(()=>{const b=u+1;b<c.length?(y(b),E(null),R(""),w(null)):W(!0)},1500)},ae=o=>{if(C||g)return;E(o);const i=c[u];Y(o===i.correctAnswer)},X=o=>{if(o.preventDefault(),g)return;const i=c[u],n=M.trim().toLowerCase()===i.correctAnswer.toLowerCase();Y(n)};if(m.length<4)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center bg-white rounded-3xl p-10 shadow-xl max-w-lg mx-auto",children:[e.jsx(ce,{className:"text-gray-200 mb-6",size:80}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Need more words"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"You need at least 4 saved words to unlock practice quizzes."}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 font-medium",children:"Close"})]});if(c.length===0&&!F&&!L)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center bg-white rounded-3xl p-10 shadow-xl max-w-lg mx-auto",children:[e.jsx("div",{className:"bg-green-100 p-6 rounded-full mb-6",children:e.jsx(xe,{className:"text-green-500",size:48})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"You're all set!"}),e.jsx("p",{className:"text-gray-500 mb-8 text-lg",children:"You have no words due for review right now."}),e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsxs("button",{onClick:()=>$(!0),className:"w-full bg-oxford-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-800 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ge,{size:20})," Review Ahead"]}),e.jsx("button",{onClick:h,className:"w-full text-gray-400 hover:bg-gray-50 py-3 rounded-xl font-medium transition-colors",children:"Back to Home"})]})]});if(F)return e.jsxs("div",{className:"max-w-2xl mx-auto w-full bg-white rounded-3xl shadow-xl overflow-hidden p-8 flex flex-col h-[600px]",children:[" ",e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-oxford-blue",children:"Review These Words"}),e.jsx("p",{className:"text-gray-500",children:"Take a moment to refresh your memory before the quiz."})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3 custom-scrollbar",children:N.map((o,i)=>{var n,b,x,r,k,f;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:o.headword}),((b=(n=o.phonetics)==null?void 0:n[0])==null?void 0:b.ipa)&&e.jsxs("span",{className:"text-sm text-gray-500 font-mono",children:["/",o.phonetics[0].ipa,"/"]})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1",children:(r=(x=o.senses)==null?void 0:x[0])==null?void 0:r.definition})]}),((f=(k=o.phonetics)==null?void 0:k[0])==null?void 0:f.audioUrl)&&e.jsx("button",{onClick:()=>A(o.phonetics[0].audioUrl),className:"p-2 bg-white rounded-full shadow-sm text-blue-500 hover:text-blue-700 hover:bg-blue-50 transition-colors",children:e.jsx(G,{size:20})})]},i)})}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:e.jsxs("button",{onClick:K,className:"w-full bg-oxford-blue text-white py-4 rounded-xl font-bold hover:bg-blue-800 transition-colors flex items-center justify-center gap-2 text-lg shadow-lg shadow-blue-900/10",children:["Start Quiz ",e.jsx(Le,{size:20})]})}),e.jsx("audio",{ref:I,className:"hidden"})]});if(L)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center bg-white rounded-3xl p-10 shadow-xl max-w-lg mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Session Complete!"}),e.jsxs("div",{className:"text-6xl font-bold text-green-500 mb-8",children:[U," ",e.jsxs("span",{className:"text-gray-300 text-4xl",children:["/ ",c.length]})]}),e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsx("button",{onClick:()=>$(!1),className:"w-full bg-oxford-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-800 transition-colors shadow-lg shadow-blue-900/10",children:"Continue Reviewing"}),e.jsx("button",{onClick:h,className:"w-full border border-gray-200 text-gray-600 py-3.5 rounded-xl font-bold hover:bg-gray-50 transition-colors",children:"Back to Home"})]})]});const j=c[u],J=j.type==="spelling",ee=j.type.startsWith("audio");return e.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[e.jsx("audio",{ref:I,className:"hidden"}),e.jsxs("div",{className:`bg-white rounded-3xl shadow-xl overflow-hidden transition-all relative ${Q?"border-4 border-orange-100":""}`,children:[e.jsx("button",{onClick:h,className:"absolute top-6 right-6 text-gray-300 hover:text-gray-500 transition-colors",children:e.jsx(de,{size:24})}),e.jsxs("div",{className:"p-8 md:p-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:["Question ",u+1," of ",c.length]}),Q&&e.jsx("span",{className:"ml-2 text-[10px] bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full font-bold uppercase",children:"Review Ahead"})]}),e.jsxs("div",{className:"bg-blue-50 text-oxford-blue px-4 py-1.5 rounded-full text-sm font-bold shadow-sm",children:["Score: ",U]})]}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-gray-400 text-sm font-medium mb-4 uppercase tracking-wide",children:j.type==="spelling"?"Type the word for":j.prompt}),ee?e.jsx("button",{onClick:()=>A(j.audioUrl),className:"mx-auto w-20 h-20 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-full flex items-center justify-center transition-all animate-fade-in",children:e.jsx(G,{size:40})}):e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("h1",{className:`${J?"text-2xl text-gray-700":"text-4xl md:text-5xl text-oxford-blue"} font-bold leading-tight`,children:j.prompt&&!ee?j.prompt:""}),j.type==="ipa"&&j.audioUrl&&e.jsx("button",{onClick:()=>A(j.audioUrl),className:"w-12 h-12 bg-blue-100 hover:bg-blue-200 text-oxford-blue rounded-full flex items-center justify-center transition-all shadow-sm",title:"Listen",children:e.jsx(G,{size:24})})]})]}),J?e.jsxs("form",{onSubmit:X,className:"max-w-md mx-auto relative flex flex-col items-center",children:[e.jsx("input",{ref:B,type:"text",value:M,onChange:o=>R(o.target.value.slice(0,j.correctAnswer.length)),disabled:!!g,className:"opacity-0 absolute inset-0 w-full h-full cursor-default z-10",autoFocus:!0,autoComplete:"off"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:j.correctAnswer.split("").map((o,i)=>{const n=M[i]||"",b=!!n,x=i===M.length;let r="w-10 h-14 sm:w-12 sm:h-16 flex items-center justify-center text-3xl font-bold rounded-xl border-2 transition-all shadow-sm ";return g==="correct"?r+="bg-green-100 border-green-500 text-green-700":g==="incorrect"?r+="bg-red-50 border-red-400 text-red-700":x&&!g?r+="border-oxford-blue bg-blue-50/50 shadow-md ring-4 ring-blue-100/50 transform -translate-y-1":b?r+="border-gray-300 bg-white text-gray-800":r+="border-gray-200 bg-gray-50/50 text-gray-300",e.jsx("div",{className:r,children:g==="incorrect"?e.jsx("span",{className:"text-red-400 text-xl",children:o}):n},i)})}),g==="incorrect"&&e.jsx("div",{className:"text-center animate-fade-in mb-6",children:e.jsxs("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg font-medium inline-block",children:["Answer: ",e.jsx("span",{className:"font-bold",children:j.correctAnswer})]})}),!g&&e.jsx("div",{className:"mt-2 text-gray-400 text-sm font-medium animate-pulse",children:"Type the word..."}),!g&&M.length>0&&e.jsx("button",{type:"submit",className:"mt-6 w-full max-w-xs bg-oxford-blue text-white py-3 rounded-xl font-bold hover:bg-blue-800 transition-colors z-20 shadow-lg shadow-blue-900/10",children:"Check Answer"})]}):e.jsx("div",{className:"grid gap-3",children:j.options.map((o,i)=>{let n="w-full text-left p-5 rounded-2xl border-2 transition-all duration-200 flex justify-between items-center group relative overflow-hidden ";const b=C===o,x=o===j.correctAnswer;return C?b&&x?n+="bg-green-50 border-green-500 text-green-900 shadow-sm z-10 scale-[1.02]":b&&!x?n+="bg-red-50 border-red-500 text-red-900 shadow-sm z-10 scale-[1.02]":x?n+="bg-green-50 border-green-300 text-green-800 opacity-100":n+="bg-gray-50 border-gray-100 opacity-30 grayscale blur-[1px]":n+="bg-white border-gray-100 hover:border-oxford-blue hover:bg-blue-50/30 hover:shadow-lg hover:-translate-y-0.5",e.jsxs("button",{onClick:()=>ae(o),disabled:!!C,className:n,children:[e.jsx("span",{className:"font-medium text-[16px] leading-snug relative z-10",children:o}),C&&x&&e.jsx(xe,{size:24,className:"text-green-600 shrink-0 ml-4 relative z-10"}),C&&b&&!x&&e.jsx(de,{size:24,className:"text-red-600 shrink-0 ml-4 relative z-10"})]},i)})})]})]})]})}function Qe({onLoginSuccess:m,onLogout:z,user:h}){var p,g;const[c,q]=a.useState(!1),[u,y]=a.useState(""),[U,H]=a.useState(""),[L,W]=a.useState(""),[C,E]=a.useState(!1),[M,R]=a.useState(null),Q=async w=>{w.preventDefault(),E(!0),R(null);try{let N;c?N=await je(u,U,L):N=await ve(u,L),N.success?m(N.user,N.token):R(N.error||"Authentication failed")}catch{R("Network error. Is server running?")}finally{E(!1)}};return h?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-100 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold",children:(g=(p=h.username)==null?void 0:p[0])==null?void 0:g.toUpperCase()}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-bold text-gray-800",children:h.username}),e.jsx("span",{className:"text-[10px] text-gray-500",children:h.email})]})]}),e.jsx("button",{onClick:z,className:"p-1.5 hover:bg-red-50 text-gray-400 hover:text-red-500 rounded transition-colors",children:e.jsx(Pe,{size:16})})]}):e.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-sm border border-gray-100 mb-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-3 flex items-center gap-1.5",children:[e.jsx(ue,{size:16}),c?"Create Account":"Login to Sync"]}),e.jsxs("form",{onSubmit:Q,className:"space-y-3",children:[c&&e.jsx("input",{type:"text",placeholder:"Username",required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-blue-500",value:U,onChange:w=>H(w.target.value)}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-blue-500",value:u,onChange:w=>y(w.target.value)}),e.jsx("input",{type:"password",placeholder:"Password",required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-200 rounded-lg focus:outline-none focus:border-blue-500",value:L,onChange:w=>W(w.target.value)}),M&&e.jsx("p",{className:"text-xs text-red-500",children:M}),e.jsxs("button",{type:"submit",disabled:C,className:"w-full py-1.5 bg-oxford-blue text-white rounded-lg text-sm font-medium hover:opacity-90 flex items-center justify-center gap-2",children:[C&&e.jsx(fe,{size:14,className:"animate-spin"}),c?"Sign Up":"Sign In"]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>{q(!c),R(null)},className:"text-xs text-gray-500 hover:text-oxford-blue hover:underline",children:c?"Already have an account? Login":"Don't have an account? Sign Up"})})]})]})}function Ie(){const[m,z]=a.useState([]),[h,c]=a.useState(!0);a.useEffect(()=>{q()},[]);const q=async()=>{c(!0);try{const u=await we();u.success&&z(u.leaderboard)}catch(u){console.error("Failed to load leaderboard",u)}finally{c(!1)}};return h?e.jsx("div",{className:"text-center p-4 text-xs text-gray-400",children:"Loading leaderboard..."}):e.jsxs("div",{className:"mt-6 mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-3 flex items-center gap-1.5 uppercase tracking-wider",children:[e.jsx(Te,{size:14,className:"text-yellow-500"})," Leaderboard"]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden shadow-sm",children:m.length===0?e.jsx("div",{className:"p-4 text-center text-xs text-gray-400",children:"No data yet"}):e.jsx("div",{className:"divide-y divide-gray-50",children:m.map((u,y)=>e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                                        ${y===0?"bg-yellow-100 text-yellow-600":y===1?"bg-gray-100 text-gray-600":y===2?"bg-orange-100 text-orange-600":"text-gray-400"}
                                    `,children:y+1}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-800 flex items-center gap-1",children:[u.username,y===0&&e.jsx(Ue,{size:12,className:"text-yellow-500"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-400 mt-0.5",children:[e.jsxs("span",{className:"flex items-center gap-1",title:"Mastered Words",children:[e.jsx(Z,{size:10,className:"text-green-500"}),e.jsx("span",{className:"font-bold text-gray-600",children:u.mastered_words||0})]}),e.jsxs("span",{className:"flex items-center gap-1",title:"Steak",children:[e.jsx(Ae,{size:10,className:"text-orange-500"}),e.jsx("span",{className:"font-bold text-gray-600",children:u.streak_days||0})]})]})]})]}),e.jsxs("div",{className:"font-mono text-sm font-bold text-oxford-blue",children:[u.total_points||0," pts"]})]},y))})})]})}function Ve(){var me;const[m,z]=a.useState([]),[h,c]=a.useState("home"),[q,u]=a.useState(!1),[y,U]=a.useState(null),[H,L]=a.useState(null),[W,C]=a.useState(!1),[E,M]=a.useState(""),[R,Q]=a.useState(!1),[p,g]=a.useState(null),[w,N]=a.useState(null),[re,F]=a.useState(!1),[D,I]=a.useState(""),[B,_]=a.useState([]),[A,O]=a.useState(null),[$,K]=a.useState([]),[T,Y]=a.useState(!1),[ae,X]=a.useState(60);a.useEffect(()=>{chrome.storage.local.get(["vocabulary","randomPracticeEnabled","randomPracticeFrequency"],s=>{if(s.vocabulary){const t=s.vocabulary.filter(l=>l&&l.headword);z(t),t.length!==s.vocabulary.length&&chrome.storage.local.set({vocabulary:t})}s.randomPracticeEnabled!==void 0&&Y(s.randomPracticeEnabled),s.randomPracticeFrequency!==void 0&&X(s.randomPracticeFrequency)}),chrome.storage.local.get(["user","token"],s=>{s.user&&s.token&&(U(s.user),L(s.token))}),chrome.storage.local.get(["selectedFolderId"],s=>{s.selectedFolderId&&O(s.selectedFolderId)}),chrome.bookmarks&&chrome.bookmarks.getTree(s=>{const t=[],l=d=>{d.forEach(S=>{S.children&&(S.id!=="0"&&t.push({id:S.id,title:S.title}),l(S.children))})};l(s),_(t)})},[]),a.useEffect(()=>{A&&chrome.bookmarks?chrome.bookmarks.getChildren(A,s=>{const t=s.filter(l=>l.url);K(t),chrome.storage.local.set({selectedFolderId:A})}):K([])},[A]);const j=()=>{const s=!T;Y(s),chrome.storage.local.set({randomPracticeEnabled:s})},J=s=>{const t=parseInt(s);X(t);const l={randomPracticeFrequency:t};t===1&&(l.randomPracticeLastTime=0,l.randomPracticeSnoozeUntil=0),chrome.storage.local.set(l)},ee=(s,t)=>{if(t.stopPropagation(),confirm(`Delete "${s}" ? `)){const l=m.filter(d=>d.headword!==s);z(l),chrome.storage.local.set({vocabulary:l})}},o=s=>{const t=m.map(l=>l.headword===s.headword?s:l);z(t),chrome.storage.local.set({vocabulary:t})},i=(s,t)=>{t&&t.stopPropagation(),s&&new Audio(s).play()},n=(s,t)=>{U(s),L(t),chrome.storage.local.set({user:s,token:t}),x(t)},b=()=>{U(null),L(null),chrome.storage.local.remove(["user","token"])},x=s=>{const t=[...m];ke(s,t).then(l=>{if(l.success&&l.vocabulary){console.log("Sync success (New Tab)");const d=l.vocabulary,S=new Map(t.map(V=>[V.headword,V])),ne=[...t];let he=!1;d.forEach(V=>{S.has(V.headword)||(ne.push({headword:V.headword,pos:"unknown",srsLevel:V.srs_level,nextReview:new Date(V.next_review).getTime(),contextUrl:"Synced",definition:"Synced via New Tab"}),he=!0)}),he&&(z(ne),chrome.storage.local.set({vocabulary:ne}))}}).catch(l=>console.error("Sync failed",l))},r=s=>{s.preventDefault();const t=E.trim();if(!t)return;const l=m.find(d=>d.headword.toLowerCase()===t.toLowerCase());if(l){g({...l,isExisting:!0}),F(!0),chrome.runtime.sendMessage({action:"syncToCloud",data:l});return}Q(!0),N(null),g(null),F(!0),chrome.runtime.sendMessage({action:"fetchDefinition",word:t},d=>{if(Q(!1),d&&d.success){const S=Se(d.html);S.error?N(S.error):(g(S),chrome.runtime.sendMessage({action:"syncToCloud",data:S}))}else N((d==null?void 0:d.error)||"Failed to fetch definition.")})},k=()=>{if(!p)return;const s={...p,contextUrl:"New Tab",srsLevel:0,nextReview:Date.now()},t=[...m,s];z(t),chrome.storage.local.set({vocabulary:t}),g({...s,isExisting:!0}),M("")},f=()=>{F(!1),g(null),N(null),Q(!1)},se=[...m].reverse().filter(s=>s.headword.toLowerCase().includes(D.toLowerCase())),le=m.filter(s=>s.nextReview?s.nextReview<=Date.now():!0).length,pe=m.filter(s=>(s.srsLevel||0)>=4).length,oe=({title:s,value:t,icon:l,color:d})=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:`p-3 rounded-xl ${d}`,children:e.jsx(l,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:s}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:t})]})]}),ye=({item:s})=>e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-all group relative animate-fade-in",children:[e.jsx("button",{onClick:t=>ee(s.headword,t),className:"absolute top-4 right-4 text-gray-300 hover:text-red-500 hover:bg-red-50 p-2 rounded-full transition-colors opacity-0 group-hover:opacity-100 z-10",title:"Delete",children:e.jsx(Fe,{size:16})}),e.jsxs("div",{className:"flex justify-between items-start mb-2 pr-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:s.headword}),e.jsx("span",{className:"text-xs text-gray-400 font-medium italic",children:s.pos})]}),e.jsxs("div",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wide ${(s.srsLevel||0)>=4?"bg-green-100 text-green-700":(s.srsLevel||0)>=2?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:["Lvl ",s.srsLevel||0]})]}),s.phonetics&&s.phonetics.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.phonetics.map((t,l)=>e.jsxs("div",{className:"flex items-center gap-1.5 bg-blue-50 px-2 py-1 rounded-lg text-oxford-blue text-sm",children:[t.type&&e.jsx("span",{className:"text-[10px] font-bold uppercase text-blue-400",children:t.type}),e.jsxs("span",{className:"font-mono text-xs",children:["/",t.ipa,"/"]}),t.audioUrl&&e.jsx("button",{onClick:d=>i(t.audioUrl,d),className:"hover:scale-110 transition-transform text-blue-600",children:e.jsx(G,{size:12})})]},l))}),e.jsxs("div",{className:"space-y-3 mt-4",children:[s.senses&&s.senses.map((t,l)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-800 font-medium leading-snug mb-1",children:[e.jsxs("span",{className:"text-gray-400 mr-2",children:[l+1,"."]}),t.definition]}),t.examples&&t.examples.length>0&&e.jsx("ul",{className:"text-gray-500 pl-6 space-y-0.5 border-l-2 border-gray-100 mt-1",children:t.examples.map((d,S)=>e.jsx("li",{className:"italic text-xs",children:typeof d=="object"?e.jsxs(e.Fragment,{children:[d.pattern&&e.jsx("span",{className:"font-bold text-oxford-blue not-italic bg-blue-50 px-1 rounded mr-1",children:d.pattern}),d.label&&e.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400 mr-1 not-italic border border-gray-200 px-1 rounded",children:d.label}),d.text]}):d},S))})]},l)),(!s.senses||s.senses.length===0)&&e.jsx("div",{className:"text-gray-400 italic text-sm",children:"No details found."})]}),e.jsx("div",{className:"flex items-center justify-end mt-4 pt-3 border-t border-gray-50",children:e.jsxs("a",{href:`https://www.oxfordlearnersdictionaries.com/definition/english/${s.headword}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-oxford-blue transition-colors flex items-center gap-1 text-xs",children:["Review Context ",e.jsx(Me,{size:12})]})})]});return q?e.jsx("div",{className:"fixed inset-0 z-50 bg-gray-50 flex flex-col animate-fade-in",children:e.jsx("div",{className:"max-w-3xl mx-auto w-full flex-1 flex flex-col justify-center p-6",children:e.jsx(qe,{vocabulary:m,onUpdateWord:o,onExit:()=>u(!1)})})}):e.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] font-sans text-slate-800 pb-24 selection:bg-blue-100",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-200",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-6 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-oxford-blue text-white p-2 rounded-lg",children:e.jsx(Z,{size:20})}),e.jsxs("span",{className:"font-bold text-xl text-oxford-blue tracking-tight",children:["Oxford",e.jsx("span",{className:"text-blue-500",children:"Vocab"})]})]}),e.jsxs("div",{className:"hidden md:flex bg-gray-100 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>c("home"),className:`px-6 py-2 rounded-lg text-sm font-semibold transition-all ${h==="home"?"bg-white text-oxford-blue shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Dashboard"}),e.jsx("button",{onClick:()=>c("library"),className:`px-6 py-2 rounded-lg text-sm font-semibold transition-all ${h==="library"?"bg-white text-oxford-blue shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Library"}),e.jsx("button",{onClick:()=>c("leaderboard"),className:`px-6 py-2 rounded-lg text-sm font-semibold transition-all ${h==="leaderboard"?"bg-white text-oxford-blue shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Leaderboard"})]}),e.jsx("button",{onClick:()=>C(!0),className:`p-2 rounded-lg transition-colors flex items-center gap-2 ${y?"bg-blue-50 text-oxford-blue":"text-gray-400 hover:bg-gray-100"}`,title:"Profile & Leaderboard",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-oxford-blue text-white flex items-center justify-center text-xs font-bold",children:y.username[0].toUpperCase()}),e.jsx("span",{className:"text-sm font-bold hidden md:inline",children:y.username})]}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(ue,{size:20,className:"text-gray-500"})})})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-6 py-8",children:[h==="home"&&e.jsxs("div",{className:"space-y-10 animate-slide-up",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Good Afternoon!"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Ready to expand your vocabulary today?"})]}),e.jsx("div",{className:"relative max-w-2xl mx-auto md:mx-0",children:e.jsxs("form",{onSubmit:r,className:"relative group",children:[e.jsx(te,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-blue-500 transition-colors",size:20}),e.jsx("input",{type:"text",className:"w-full bg-white pl-12 pr-4 py-4 rounded-2xl shadow-sm border border-gray-200 focus:ring-4 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all text-lg",placeholder:"Search dictionary or add a new word...",value:E,onChange:s=>M(s.target.value)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 bg-gray-100 hover:bg-oxford-blue hover:text-white text-gray-600 p-2 rounded-xl transition-all",children:e.jsx(ie,{size:20})})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto md:mx-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Z,{size:20,className:"text-blue-500"}),"Quick Access"]}),e.jsxs("select",{value:A||"",onChange:s=>O(s.target.value),className:"bg-white border border-gray-200 text-gray-700 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 outline-none hover:border-gray-300 transition-colors",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a folder"}),B.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]}),$.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:$.map(s=>e.jsxs("a",{href:s.url,className:"bg-white p-3 rounded-xl border border-gray-100 shadow-sm hover:shadow-md hover:-translate-y-0.5 transition-all flex items-center gap-3 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center shrink-0 group-hover:bg-blue-50 transition-colors",children:e.jsx("img",{src:`chrome-extension://${chrome.runtime.id}/_favicon/?pageUrl=${encodeURIComponent(s.url)}&size=32`,alt:"",className:"w-5 h-5 object-contain",onError:t=>{t.target.style.display="none"}})}),e.jsx("span",{className:"text-sm font-medium text-gray-700 truncate group-hover:text-blue-600 transition-colors",children:s.title||s.url})]},s.id))}):A?e.jsx("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-200",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"No bookmarks in this folder."})}):e.jsx("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-200",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Select a folder to view bookmarks."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(oe,{title:"Words to Review",value:le,icon:ce,color:"bg-orange-400"}),e.jsx(oe,{title:"Total Words",value:m.length,icon:Z,color:"bg-blue-500"}),e.jsx(oe,{title:"Mastered",value:pe,icon:be,color:"bg-green-500"})]}),e.jsxs("div",{className:"bg-oxford-blue rounded-3xl p-8 text-white relative overflow-hidden shadow-xl group cursor-pointer transition-transform hover:scale-[1.01]",onClick:()=>u(!0),children:[e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Daily Practice Session"}),e.jsx("p",{className:"text-blue-100 max-w-md",children:le>0?`You have ${le} words waiting for review. Keep your streak alive!`:"You're all caught up! Review ahead to reinforce your memory."})]}),e.jsx("button",{className:"bg-white text-oxford-blue px-6 py-3 rounded-xl font-bold shadow-lg hover:bg-blue-50 transition-colors whitespace-nowrap",children:"Start Session"})]}),e.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-white opacity-5 rounded-full pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-blue-500 opacity-20 rounded-full blur-2xl pointer-events-none"})]}),e.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2 mb-1",children:[e.jsx(ce,{size:20,className:"text-blue-500"}),"Random Practice Mode"]}),e.jsx("p",{className:"text-gray-500 text-sm max-w-md",children:"Occasionally show a quick quiz while you browse the web to reinforce your memory."})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 p-2 rounded-xl",children:[T&&e.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[e.jsx(ge,{size:16,className:"text-gray-400"}),e.jsxs("select",{value:ae,onChange:s=>J(s.target.value),className:"bg-transparent text-sm font-semibold text-gray-700 outline-none cursor-pointer",children:[e.jsx("option",{value:"1",children:"Every 1 min (Test)"}),e.jsx("option",{value:"30",children:"Every 30 mins"}),e.jsx("option",{value:"60",children:"Every 1 hour"}),e.jsx("option",{value:"120",children:"Every 2 hours"}),e.jsx("option",{value:"240",children:"Every 4 hours"})]})]}),e.jsxs("button",{onClick:j,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-all text-sm ${T?"bg-blue-100 text-blue-700 shadow-sm":"bg-gray-200 text-gray-500 hover:bg-gray-300"}`,children:[e.jsx(Ee,{size:16}),T?"Enabled":"Disabled"]})]})]})})]}),h==="library"&&e.jsxs("div",{className:"space-y-6 animate-slide-up",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Dictionary"}),e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search your words...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",value:D,onChange:s=>I(s.target.value)})]})]}),se.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-gray-200",children:[e.jsx(te,{className:"mx-auto text-gray-300 mb-4",size:48}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No words found."}),m.length===0&&e.jsx("p",{className:"text-sm text-gray-400",children:"Try saving some words from the web!"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:se.map(s=>e.jsx(ye,{item:s},s.headword))})]}),h==="leaderboard"&&e.jsxs("div",{className:"space-y-6 animate-slide-up",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Leaderboard"})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:e.jsx(Ie,{})})]})]}),e.jsxs("div",{className:"md:hidden fixed bottom-0 inset-x-0 bg-white border-t border-gray-200 p-2 flex justify-around z-40 pb-safe",children:[e.jsxs("button",{onClick:()=>c("home"),className:`flex flex-col items-center p-2 rounded-lg w-full ${h==="home"?"text-oxford-blue":"text-gray-400"}`,children:[e.jsx(Re,{size:24,strokeWidth:h==="home"?2.5:2}),e.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Home"})]}),e.jsxs("button",{onClick:()=>c("library"),className:`flex flex-col items-center p-2 rounded-lg w-full ${h==="library"?"text-oxford-blue":"text-gray-400"}`,children:[e.jsx(Z,{size:24,strokeWidth:h==="library"?2.5:2}),e.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Library"})]}),e.jsxs("button",{onClick:()=>c("leaderboard"),className:`flex flex-col items-center p-2 rounded-lg w-full ${h==="leaderboard"?"text-oxford-blue":"text-gray-400"}`,children:[e.jsx(be,{size:24,strokeWidth:h==="leaderboard"?2.5:2}),e.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Leader"})]})]}),re&&e.jsx("div",{className:"fixed inset-0 z-[60] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:f,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col overflow-hidden relative",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-oxford-blue text-white px-6 py-4 flex justify-between items-center shrink-0",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Word Lookup"}),e.jsx("button",{onClick:f,className:"hover:text-red-200 transition-colors",children:e.jsx(ie,{className:"rotate-45",size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:R?e.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(fe,{className:"animate-spin mb-3 text-oxford-blue",size:32}),e.jsx("p",{children:"Searching Oxford Dictionary..."})]}):w?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(te,{size:32})}),e.jsx("p",{className:"text-gray-800 font-bold mb-1",children:"Not Found"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:w}),e.jsx("button",{onClick:f,className:"text-oxford-blue font-medium hover:underline",children:"Try another word"})]}):p?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:p.headword}),e.jsx("span",{className:"text-gray-500 italic font-serif",children:p.pos})]}),p.phonetics&&p.phonetics.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:p.phonetics.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-full text-oxford-blue",children:[s.audioUrl&&e.jsx("button",{onClick:()=>i(s.audioUrl),className:"hover:scale-110 transition-transform",children:e.jsx(G,{size:16})}),e.jsxs("span",{className:"font-mono text-sm",children:["/",s.ipa,"/"]})]},t))}),e.jsx("div",{className:"space-y-4 mb-6",children:(me=p.senses)==null?void 0:me.map((s,t)=>e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-oxford-blue font-bold text-sm bg-blue-100 h-6 w-6 flex items-center justify-center rounded-full shrink-0",children:t+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 mb-2 leading-relaxed",children:s.definition}),s.synonyms&&s.synonyms.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mt-1",children:"Synonyms:"}),s.synonyms.map((l,d)=>e.jsx("span",{className:"bg-white border border-gray-200 px-2 py-0.5 rounded text-xs text-gray-600 font-medium",children:l},d))]}),s.examples&&s.examples.length>0&&e.jsx("ul",{className:"text-gray-500 italic text-sm pl-3 border-l-2 border-blue-200 space-y-1",children:s.examples.map((l,d)=>e.jsx("li",{children:typeof l=="object"?e.jsxs(e.Fragment,{children:[l.pattern&&e.jsx("span",{className:"font-bold text-oxford-blue not-italic bg-blue-50 px-1 rounded mr-1",children:l.pattern}),l.text]}):l},d))})]})]})},t))}),p.idioms&&p.idioms.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(Ne,{size:16})," Idioms"]}),e.jsx("div",{className:"space-y-3",children:p.idioms.map((s,t)=>e.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-100",children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm mb-1",children:s.phrase}),e.jsx("p",{className:"text-xs text-gray-600",children:s.definition})]},t))})]}),p.isExisting?e.jsxs("div",{className:"bg-green-50 text-green-700 px-4 py-3 rounded-xl flex items-center justify-center gap-2 font-bold mb-2",children:[e.jsx(xe,{size:20})," Already in Library"]}):e.jsxs("button",{onClick:k,className:"w-full bg-oxford-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-800 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-blue-900/10",children:[e.jsx(ie,{size:20})," Add to Vocabulary"]})]}):null})]})}),W&&e.jsx("div",{className:"fixed inset-0 z-[60] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>C(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col overflow-hidden relative",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-oxford-blue text-white px-6 py-4 flex justify-between items-center shrink-0",children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx(ue,{size:20})," User Profile"]}),e.jsx("button",{onClick:()=>C(!1),className:"hover:text-red-200 transition-colors",children:e.jsx(de,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:e.jsx(Qe,{user:y,onLoginSuccess:n,onLogout:b})})]})})]})}ze.createRoot(document.getElementById("root")).render(e.jsx(Ce.StrictMode,{children:e.jsx(Ve,{})}));

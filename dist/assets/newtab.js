import{c as v,r as i,j as e,V as q,X as re,S as Z,L as le,T as oe,p as ne,a as ie,R as ce}from"./index.js";/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=v("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=v("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=v("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=v("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=v("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=v("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=v("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=v("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=v("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=v("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=v("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function ge({vocabulary:h,onUpdateWord:N,onExit:g}){const[m,$]=i.useState([]),[y,T]=i.useState(0),[W,V]=i.useState(0),[k,b]=i.useState(!1),[f,R]=i.useState(null),[w,I]=i.useState(""),[L,H]=i.useState(!1),[p,M]=i.useState(null),[G,S]=i.useState([]),[z,E]=i.useState(!1),C=i.useRef(null),A=i.useRef(null),P=i.useRef(new Set);i.useEffect(()=>{m.length===0&&h.length>0&&!z&&O()},[h]),i.useEffect(()=>{if(!z&&m.length>0&&!k){const a=m[y];a.type==="spelling"&&A.current&&A.current.focus(),(a.type==="audio-word"||a.type==="audio-meaning")&&a.audioUrl&&Q(a.audioUrl)}},[y,m,k,z]);const Q=a=>{C.current&&a&&(C.current.src=a,C.current.play().catch(n=>console.log("Audio play failed",n)))},F=a=>{const n=Date.now(),o=24*60*60*1e3;switch(a){case 0:return n+1*o;case 1:return n+3*o;case 2:return n+7*o;case 3:return n+14*o;default:return n+a*7*o}},O=(a=!1)=>{if(H(a),h.length<4)return;const n=Date.now();let o=h.filter(r=>r.nextReview?r.nextReview<=n:!0);if(a){const r=h.filter(t=>!o.includes(t)&&(t.srsLevel===0||!t.srsLevel)).sort((t,l)=>(t.nextReview||0)-(l.nextReview||0)),s=5-o.length;s>0&&(o=[...o,...r.slice(0,s)])}const x=o.slice(0,5);S(x),E(!0),b(!1);let c=[];x.forEach(r=>{const s=r.phonetics&&r.phonetics[0]&&r.phonetics[0].audioUrl,t=r.senses&&r.senses[0]?r.senses[0].definition:"No definition",l=h.filter(d=>d.headword!==r.headword);c.push({wordObj:r,type:"meaning",prompt:r.headword,correctAnswer:t,options:[t,...U(l,3,"definition")].sort(()=>.5-Math.random())}),c.push({wordObj:r,type:"spelling",prompt:t,correctAnswer:r.headword,options:[]}),s&&c.push({wordObj:r,type:"audio-word",audioUrl:r.phonetics[0].audioUrl,prompt:"Listen and match the word",correctAnswer:r.headword,options:[r.headword,...U(l,3,"headword")].sort(()=>.5-Math.random())}),s&&c.push({wordObj:r,type:"audio-meaning",audioUrl:r.phonetics[0].audioUrl,prompt:"Listen and choose the meaning",correctAnswer:t,options:[t,...U(l,3,"definition")].sort(()=>.5-Math.random())}),s&&r.phonetics&&r.phonetics[0]&&r.phonetics[0].ipa&&c.push({wordObj:r,type:"ipa",audioUrl:r.phonetics[0].audioUrl,prompt:`How is "${r.headword}" pronounced?`,correctAnswer:r.phonetics[0].ipa,options:[r.phonetics[0].ipa,...U(l,3,"ipa")].sort(()=>.5-Math.random())})}),c=c.sort(()=>.5-Math.random()),c.length>0?($(c),T(0),V(0),R(null),I(""),M(null),P.current.clear()):($([]),E(!1))},K=()=>{E(!1)},U=(a,n,o)=>{const x=c=>{var r,s,t,l;return o==="definition"?((s=(r=c.senses)==null?void 0:r[0])==null?void 0:s.definition)||"No def":o==="ipa"?((l=(t=c.phonetics)==null?void 0:t[0])==null?void 0:l.ipa)||"/.../":c[o]};return a.sort(()=>.5-Math.random()).slice(0,n).map(x)},B=a=>{const n=m[y],o=n.wordObj.headword;if(a)if(V(x=>x+1),M("correct"),P.current.has(o))N({...n.wordObj,srsLevel:0,nextReview:F(0)});else{const c=(n.wordObj.srsLevel||0)+1;N({...n.wordObj,srsLevel:c,nextReview:F(c)})}else P.current.add(o),M("incorrect"),N({...n.wordObj,srsLevel:0,nextReview:F(0)});setTimeout(()=>{const x=y+1;x<m.length?(T(x),R(null),I(""),M(null)):b(!0)},1500)},Y=a=>{if(f||p)return;R(a);const n=m[y];B(a===n.correctAnswer)},X=a=>{if(a.preventDefault(),p)return;const n=m[y],o=w.trim().toLowerCase()===n.correctAnswer.toLowerCase();B(o)};if(h.length<4)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center bg-white rounded-3xl p-10 shadow-xl max-w-lg mx-auto",children:[e.jsx(se,{className:"text-gray-200 mb-6",size:80}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Need more words"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"You need at least 4 saved words to unlock practice quizzes."}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 font-medium",children:"Close"})]});if(m.length===0&&!z&&!k)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center bg-white rounded-3xl p-10 shadow-xl max-w-lg mx-auto",children:[e.jsx("div",{className:"bg-green-100 p-6 rounded-full mb-6",children:e.jsx(te,{className:"text-green-500",size:48})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"You're all set!"}),e.jsx("p",{className:"text-gray-500 mb-8 text-lg",children:"You have no words due for review right now."}),e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsxs("button",{onClick:()=>O(!0),className:"w-full bg-oxford-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-800 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ae,{size:20})," Review Ahead"]}),e.jsx("button",{onClick:g,className:"w-full text-gray-400 hover:bg-gray-50 py-3 rounded-xl font-medium transition-colors",children:"Back to Home"})]})]});if(z)return e.jsxs("div",{className:"max-w-2xl mx-auto w-full bg-white rounded-3xl shadow-xl overflow-hidden p-8 flex flex-col h-[600px]",children:[" ",e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-oxford-blue",children:"Review These Words"}),e.jsx("p",{className:"text-gray-500",children:"Take a moment to refresh your memory before the quiz."})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3 custom-scrollbar",children:G.map((a,n)=>{var o,x,c,r,s,t;return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:a.headword}),((x=(o=a.phonetics)==null?void 0:o[0])==null?void 0:x.ipa)&&e.jsxs("span",{className:"text-sm text-gray-500 font-mono",children:["/",a.phonetics[0].ipa,"/"]})]}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-1",children:(r=(c=a.senses)==null?void 0:c[0])==null?void 0:r.definition})]}),((t=(s=a.phonetics)==null?void 0:s[0])==null?void 0:t.audioUrl)&&e.jsx("button",{onClick:()=>Q(a.phonetics[0].audioUrl),className:"p-2 bg-white rounded-full shadow-sm text-blue-500 hover:text-blue-700 hover:bg-blue-50 transition-colors",children:e.jsx(q,{size:20})})]},n)})}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100",children:e.jsxs("button",{onClick:K,className:"w-full bg-oxford-blue text-white py-4 rounded-xl font-bold hover:bg-blue-800 transition-colors flex items-center justify-center gap-2 text-lg shadow-lg shadow-blue-900/10",children:["Start Quiz ",e.jsx(de,{size:20})]})}),e.jsx("audio",{ref:C,className:"hidden"})]});if(k)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center bg-white rounded-3xl p-10 shadow-xl max-w-lg mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Session Complete!"}),e.jsxs("div",{className:"text-6xl font-bold text-green-500 mb-8",children:[W," ",e.jsxs("span",{className:"text-gray-300 text-4xl",children:["/ ",m.length]})]}),e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsx("button",{onClick:()=>O(!1),className:"w-full bg-oxford-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-800 transition-colors shadow-lg shadow-blue-900/10",children:"Continue Reviewing"}),e.jsx("button",{onClick:g,className:"w-full border border-gray-200 text-gray-600 py-3.5 rounded-xl font-bold hover:bg-gray-50 transition-colors",children:"Back to Home"})]})]});const u=m[y],D=u.type==="spelling",J=u.type.startsWith("audio");return e.jsxs("div",{className:"max-w-2xl mx-auto w-full",children:[e.jsx("audio",{ref:C,className:"hidden"}),e.jsxs("div",{className:`bg-white rounded-3xl shadow-xl overflow-hidden transition-all relative ${L?"border-4 border-orange-100":""}`,children:[e.jsx("button",{onClick:g,className:"absolute top-6 right-6 text-gray-300 hover:text-gray-500 transition-colors",children:e.jsx(re,{size:24})}),e.jsxs("div",{className:"p-8 md:p-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:["Question ",y+1," of ",m.length]}),L&&e.jsx("span",{className:"ml-2 text-[10px] bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full font-bold uppercase",children:"Review Ahead"})]}),e.jsxs("div",{className:"bg-blue-50 text-oxford-blue px-4 py-1.5 rounded-full text-sm font-bold shadow-sm",children:["Score: ",W]})]}),e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-gray-400 text-sm font-medium mb-4 uppercase tracking-wide",children:u.type==="spelling"?"Type the word for":u.prompt}),J?e.jsx("button",{onClick:()=>Q(u.audioUrl),className:"mx-auto w-20 h-20 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-full flex items-center justify-center transition-all animate-fade-in",children:e.jsx(q,{size:40})}):e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("h1",{className:`${D?"text-2xl text-gray-700":"text-4xl md:text-5xl text-oxford-blue"} font-bold leading-tight`,children:u.prompt&&!J?u.prompt:""}),u.type==="ipa"&&u.audioUrl&&e.jsx("button",{onClick:()=>Q(u.audioUrl),className:"w-12 h-12 bg-blue-100 hover:bg-blue-200 text-oxford-blue rounded-full flex items-center justify-center transition-all shadow-sm",title:"Listen",children:e.jsx(q,{size:24})})]})]}),D?e.jsxs("form",{onSubmit:X,className:"max-w-md mx-auto relative flex flex-col items-center",children:[e.jsx("input",{ref:A,type:"text",value:w,onChange:a=>I(a.target.value.slice(0,u.correctAnswer.length)),disabled:!!p,className:"opacity-0 absolute inset-0 w-full h-full cursor-default z-10",autoFocus:!0,autoComplete:"off"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:u.correctAnswer.split("").map((a,n)=>{const o=w[n]||"",x=!!o,c=n===w.length;let r="w-10 h-14 sm:w-12 sm:h-16 flex items-center justify-center text-3xl font-bold rounded-xl border-2 transition-all shadow-sm ";return p==="correct"?r+="bg-green-100 border-green-500 text-green-700":p==="incorrect"?r+="bg-red-50 border-red-400 text-red-700":c&&!p?r+="border-oxford-blue bg-blue-50/50 shadow-md ring-4 ring-blue-100/50 transform -translate-y-1":x?r+="border-gray-300 bg-white text-gray-800":r+="border-gray-200 bg-gray-50/50 text-gray-300",e.jsx("div",{className:r,children:p==="incorrect"?e.jsx("span",{className:"text-red-400 text-xl",children:a}):o},n)})}),p==="incorrect"&&e.jsx("div",{className:"text-center animate-fade-in mb-6",children:e.jsxs("div",{className:"bg-red-50 text-red-600 px-4 py-2 rounded-lg font-medium inline-block",children:["Answer: ",e.jsx("span",{className:"font-bold",children:u.correctAnswer})]})}),!p&&e.jsx("div",{className:"mt-2 text-gray-400 text-sm font-medium animate-pulse",children:"Type the word..."}),!p&&w.length>0&&e.jsx("button",{type:"submit",className:"mt-6 w-full max-w-xs bg-oxford-blue text-white py-3 rounded-xl font-bold hover:bg-blue-800 transition-colors z-20 shadow-lg shadow-blue-900/10",children:"Check Answer"})]}):e.jsx("div",{className:"grid gap-3",children:u.options.map((a,n)=>{let o="w-full text-left p-5 rounded-2xl border-2 transition-all duration-200 flex justify-between items-center group relative overflow-hidden ";const x=f===a,c=a===u.correctAnswer;return f?x&&c?o+="bg-green-50 border-green-500 text-green-900 shadow-sm z-10 scale-[1.02]":x&&!c?o+="bg-red-50 border-red-500 text-red-900 shadow-sm z-10 scale-[1.02]":c?o+="bg-green-50 border-green-300 text-green-800 opacity-100":o+="bg-gray-50 border-gray-100 opacity-30 grayscale blur-[1px]":o+="bg-white border-gray-100 hover:border-oxford-blue hover:bg-blue-50/30 hover:shadow-lg hover:-translate-y-0.5",e.jsxs("button",{onClick:()=>Y(a),disabled:!!f,className:o,children:[e.jsx("span",{className:"font-medium text-[16px] leading-snug relative z-10",children:a}),f&&c&&e.jsx(te,{size:24,className:"text-green-600 shrink-0 ml-4 relative z-10"}),f&&x&&!c&&e.jsx(re,{size:24,className:"text-red-600 shrink-0 ml-4 relative z-10"})]},n)})})]})]})]})}function fe(){var r;const[h,N]=i.useState([]),[g,m]=i.useState("home"),[$,y]=i.useState(!1),[T,W]=i.useState(""),[V,k]=i.useState(!1),[b,f]=i.useState(null),[R,w]=i.useState(null),[I,L]=i.useState(!1),[H,p]=i.useState(""),[M,G]=i.useState([]),[S,z]=i.useState(null),[E,C]=i.useState([]),[A,P]=i.useState(!1),[Q,F]=i.useState(60);i.useEffect(()=>{chrome.storage.local.get(["vocabulary","randomPracticeEnabled","randomPracticeFrequency"],s=>{if(s.vocabulary){const t=s.vocabulary.filter(l=>l&&l.headword);N(t),t.length!==s.vocabulary.length&&chrome.storage.local.set({vocabulary:t})}s.randomPracticeEnabled!==void 0&&P(s.randomPracticeEnabled),s.randomPracticeFrequency!==void 0&&F(s.randomPracticeFrequency)}),chrome.storage.local.get(["selectedFolderId"],s=>{s.selectedFolderId&&z(s.selectedFolderId)}),chrome.bookmarks&&chrome.bookmarks.getTree(s=>{const t=[],l=d=>{d.forEach(j=>{j.children&&(j.id!=="0"&&t.push({id:j.id,title:j.title}),l(j.children))})};l(s),G(t)})},[]),i.useEffect(()=>{S&&chrome.bookmarks?chrome.bookmarks.getChildren(S,s=>{const t=s.filter(l=>l.url);C(t),chrome.storage.local.set({selectedFolderId:S})}):C([])},[S]);const O=()=>{const s=!A;P(s),chrome.storage.local.set({randomPracticeEnabled:s})},K=s=>{const t=parseInt(s);F(t);const l={randomPracticeFrequency:t};t===1&&(l.randomPracticeLastTime=0,l.randomPracticeSnoozeUntil=0),chrome.storage.local.set(l)},U=(s,t)=>{if(t.stopPropagation(),confirm(`Delete "${s}" ? `)){const l=h.filter(d=>d.headword!==s);N(l),chrome.storage.local.set({vocabulary:l})}},B=s=>{const t=h.map(l=>l.headword===s.headword?s:l);N(t),chrome.storage.local.set({vocabulary:t})},Y=(s,t)=>{t&&t.stopPropagation(),s&&new Audio(s).play()},X=s=>{s.preventDefault();const t=T.trim();if(!t)return;const l=h.find(d=>d.headword.toLowerCase()===t.toLowerCase());if(l){f({...l,isExisting:!0}),L(!0);return}k(!0),w(null),f(null),L(!0),chrome.runtime.sendMessage({action:"fetchDefinition",word:t},d=>{if(k(!1),d&&d.success){const j=ne(d.html);j.error?w(j.error):f(j)}else w((d==null?void 0:d.error)||"Failed to fetch definition.")})},u=()=>{if(!b)return;const s={...b,contextUrl:"New Tab",srsLevel:0,nextReview:Date.now()},t=[...h,s];N(t),chrome.storage.local.set({vocabulary:t}),f({...s,isExisting:!0}),W("")},D=()=>{L(!1),f(null),w(null),k(!1)},a=[...h].reverse().filter(s=>s.headword.toLowerCase().includes(H.toLowerCase())),n=h.filter(s=>s.nextReview?s.nextReview<=Date.now():!0).length,o=h.filter(s=>(s.srsLevel||0)>=4).length,x=({title:s,value:t,icon:l,color:d})=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex items-center gap-4 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:`p-3 rounded-xl ${d}`,children:e.jsx(l,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm font-medium",children:s}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:t})]})]}),c=({item:s})=>e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-all group relative animate-fade-in",children:[e.jsx("button",{onClick:t=>U(s.headword,t),className:"absolute top-4 right-4 text-gray-300 hover:text-red-500 hover:bg-red-50 p-2 rounded-full transition-colors opacity-0 group-hover:opacity-100 z-10",title:"Delete",children:e.jsx(be,{size:16})}),e.jsxs("div",{className:"flex justify-between items-start mb-2 pr-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:s.headword}),e.jsx("span",{className:"text-xs text-gray-400 font-medium italic",children:s.pos})]}),e.jsxs("div",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wide ${(s.srsLevel||0)>=4?"bg-green-100 text-green-700":(s.srsLevel||0)>=2?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:["Lvl ",s.srsLevel||0]})]}),s.phonetics&&s.phonetics.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.phonetics.map((t,l)=>e.jsxs("div",{className:"flex items-center gap-1.5 bg-blue-50 px-2 py-1 rounded-lg text-oxford-blue text-sm",children:[t.type&&e.jsx("span",{className:"text-[10px] font-bold uppercase text-blue-400",children:t.type}),e.jsxs("span",{className:"font-mono text-xs",children:["/",t.ipa,"/"]}),t.audioUrl&&e.jsx("button",{onClick:d=>Y(t.audioUrl,d),className:"hover:scale-110 transition-transform text-blue-600",children:e.jsx(q,{size:12})})]},l))}),e.jsxs("div",{className:"space-y-3 mt-4",children:[s.senses&&s.senses.map((t,l)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-800 font-medium leading-snug mb-1",children:[e.jsxs("span",{className:"text-gray-400 mr-2",children:[l+1,"."]}),t.definition]}),t.examples&&t.examples.length>0&&e.jsx("ul",{className:"text-gray-500 pl-6 space-y-0.5 border-l-2 border-gray-100 mt-1",children:t.examples.map((d,j)=>e.jsxs("li",{className:"italic text-xs",children:['"',d,'"']},j))})]},l)),(!s.senses||s.senses.length===0)&&e.jsx("div",{className:"text-gray-400 italic text-sm",children:"No details found."})]}),e.jsx("div",{className:"flex items-center justify-end mt-4 pt-3 border-t border-gray-50",children:e.jsxs("a",{href:`https://www.oxfordlearnersdictionaries.com/definition/english/${s.headword}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-oxford-blue transition-colors flex items-center gap-1 text-xs",children:["Review Context ",e.jsx(he,{size:12})]})})]});return $?e.jsx("div",{className:"fixed inset-0 z-50 bg-gray-50 flex flex-col animate-fade-in",children:e.jsx("div",{className:"max-w-3xl mx-auto w-full flex-1 flex flex-col justify-center p-6",children:e.jsx(ge,{vocabulary:h,onUpdateWord:B,onExit:()=>y(!1)})})}):e.jsxs("div",{className:"min-h-screen bg-[#F8FAFC] font-sans text-slate-800 pb-24 selection:bg-blue-100",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-200",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-6 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-oxford-blue text-white p-2 rounded-lg",children:e.jsx(_,{size:20})}),e.jsxs("span",{className:"font-bold text-xl text-oxford-blue tracking-tight",children:["Oxford",e.jsx("span",{className:"text-blue-500",children:"Vocab"})]})]}),e.jsxs("div",{className:"hidden md:flex bg-gray-100 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>m("home"),className:`px-6 py-2 rounded-lg text-sm font-semibold transition-all ${g==="home"?"bg-white text-oxford-blue shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Dashboard"}),e.jsx("button",{onClick:()=>m("library"),className:`px-6 py-2 rounded-lg text-sm font-semibold transition-all ${g==="library"?"bg-white text-oxford-blue shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Library"})]}),e.jsx("div",{className:"w-8"})," "]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-6 py-8",children:[g==="home"&&e.jsxs("div",{className:"space-y-10 animate-slide-up",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Good Afternoon!"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Ready to expand your vocabulary today?"})]}),e.jsx("div",{className:"relative max-w-2xl mx-auto md:mx-0",children:e.jsxs("form",{onSubmit:X,className:"relative group",children:[e.jsx(Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-blue-500 transition-colors",size:20}),e.jsx("input",{type:"text",className:"w-full bg-white pl-12 pr-4 py-4 rounded-2xl shadow-sm border border-gray-200 focus:ring-4 focus:ring-blue-100 focus:border-blue-500 outline-none transition-all text-lg",placeholder:"Search dictionary or add a new word...",value:T,onChange:s=>W(s.target.value)}),e.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 -translate-y-1/2 bg-gray-100 hover:bg-oxford-blue hover:text-white text-gray-600 p-2 rounded-xl transition-all",children:e.jsx(ee,{size:20})})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto md:mx-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(_,{size:20,className:"text-blue-500"}),"Quick Access"]}),e.jsxs("select",{value:S||"",onChange:s=>z(s.target.value),className:"bg-white border border-gray-200 text-gray-700 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 outline-none hover:border-gray-300 transition-colors",children:[e.jsx("option",{value:"",disabled:!0,children:"Select a folder"}),M.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]}),E.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:E.map(s=>e.jsxs("a",{href:s.url,className:"bg-white p-3 rounded-xl border border-gray-100 shadow-sm hover:shadow-md hover:-translate-y-0.5 transition-all flex items-center gap-3 group",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-50 flex items-center justify-center shrink-0 group-hover:bg-blue-50 transition-colors",children:e.jsx("img",{src:`chrome-extension://${chrome.runtime.id}/_favicon/?pageUrl=${encodeURIComponent(s.url)}&size=32`,alt:"",className:"w-5 h-5 object-contain",onError:t=>{t.target.style.display="none"}})}),e.jsx("span",{className:"text-sm font-medium text-gray-700 truncate group-hover:text-blue-600 transition-colors",children:s.title||s.url})]},s.id))}):S?e.jsx("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-200",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"No bookmarks in this folder."})}):e.jsx("div",{className:"text-center py-8 bg-white rounded-xl border border-dashed border-gray-200",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Select a folder to view bookmarks."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(x,{title:"Words to Review",value:n,icon:se,color:"bg-orange-400"}),e.jsx(x,{title:"Total Words",value:h.length,icon:_,color:"bg-blue-500"}),e.jsx(x,{title:"Mastered",value:o,icon:xe,color:"bg-green-500"})]}),e.jsxs("div",{className:"bg-oxford-blue rounded-3xl p-8 text-white relative overflow-hidden shadow-xl group cursor-pointer transition-transform hover:scale-[1.01]",onClick:()=>y(!0),children:[e.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Daily Practice Session"}),e.jsx("p",{className:"text-blue-100 max-w-md",children:n>0?`You have ${n} words waiting for review. Keep your streak alive!`:"You're all caught up! Review ahead to reinforce your memory."})]}),e.jsx("button",{className:"bg-white text-oxford-blue px-6 py-3 rounded-xl font-bold shadow-lg hover:bg-blue-50 transition-colors whitespace-nowrap",children:"Start Session"})]}),e.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-white opacity-5 rounded-full pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-blue-500 opacity-20 rounded-full blur-2xl pointer-events-none"})]}),e.jsx("div",{className:"bg-white rounded-3xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2 mb-1",children:[e.jsx(se,{size:20,className:"text-blue-500"}),"Random Practice Mode"]}),e.jsx("p",{className:"text-gray-500 text-sm max-w-md",children:"Occasionally show a quick quiz while you browse the web to reinforce your memory."})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 p-2 rounded-xl",children:[A&&e.jsxs("div",{className:"flex items-center gap-2 mr-2",children:[e.jsx(ae,{size:16,className:"text-gray-400"}),e.jsxs("select",{value:Q,onChange:s=>K(s.target.value),className:"bg-transparent text-sm font-semibold text-gray-700 outline-none cursor-pointer",children:[e.jsx("option",{value:"1",children:"Every 1 min (Test)"}),e.jsx("option",{value:"30",children:"Every 30 mins"}),e.jsx("option",{value:"60",children:"Every 1 hour"}),e.jsx("option",{value:"120",children:"Every 2 hours"}),e.jsx("option",{value:"240",children:"Every 4 hours"})]})]}),e.jsxs("button",{onClick:O,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-all text-sm ${A?"bg-blue-100 text-blue-700 shadow-sm":"bg-gray-200 text-gray-500 hover:bg-gray-300"}`,children:[e.jsx(ue,{size:16}),A?"Enabled":"Disabled"]})]})]})})]}),g==="library"&&e.jsxs("div",{className:"space-y-6 animate-slide-up",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Dictionary"}),e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search your words...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",value:H,onChange:s=>p(s.target.value)})]})]}),a.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-gray-200",children:[e.jsx(Z,{className:"mx-auto text-gray-300 mb-4",size:48}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No words found."}),h.length===0&&e.jsx("p",{className:"text-sm text-gray-400",children:"Try saving some words from the web!"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:a.map(s=>e.jsx(c,{item:s},s.headword))})]})]}),e.jsxs("div",{className:"md:hidden fixed bottom-0 inset-x-0 bg-white border-t border-gray-200 p-2 flex justify-around z-40 pb-safe",children:[e.jsxs("button",{onClick:()=>m("home"),className:`flex flex-col items-center p-2 rounded-lg w-full ${g==="home"?"text-oxford-blue":"text-gray-400"}`,children:[e.jsx(me,{size:24,strokeWidth:g==="home"?2.5:2}),e.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Home"})]}),e.jsxs("button",{onClick:()=>m("library"),className:`flex flex-col items-center p-2 rounded-lg w-full ${g==="library"?"text-oxford-blue":"text-gray-400"}`,children:[e.jsx(_,{size:24,strokeWidth:g==="library"?2.5:2}),e.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Library"})]})]}),I&&e.jsx("div",{className:"fixed inset-0 z-[60] bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:D,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden relative",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"bg-oxford-blue text-white px-6 py-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Word Lookup"}),e.jsx("button",{onClick:D,className:"hover:text-red-200 transition-colors",children:e.jsx(ee,{className:"rotate-45",size:24})})]}),e.jsx("div",{className:"p-6",children:V?e.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-400",children:[e.jsx(le,{className:"animate-spin mb-3 text-oxford-blue",size:32}),e.jsx("p",{children:"Searching Oxford Dictionary..."})]}):R?e.jsxs("div",{className:"py-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Z,{size:32})}),e.jsx("p",{className:"text-gray-800 font-bold mb-1",children:"Not Found"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:R}),e.jsx("button",{onClick:D,className:"text-oxford-blue font-medium hover:underline",children:"Try another word"})]}):b?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:b.headword}),e.jsx("span",{className:"text-gray-500 italic font-serif",children:b.pos})]}),b.phonetics&&b.phonetics.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:b.phonetics.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-full text-oxford-blue",children:[s.audioUrl&&e.jsx("button",{onClick:()=>Y(s.audioUrl),className:"hover:scale-110 transition-transform",children:e.jsx(q,{size:16})}),e.jsxs("span",{className:"font-mono text-sm",children:["/",s.ipa,"/"]})]},t))}),e.jsx("div",{className:"space-y-4 mb-6",children:(r=b.senses)==null?void 0:r.map((s,t)=>e.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-oxford-blue font-bold text-sm bg-blue-100 h-6 w-6 flex items-center justify-center rounded-full shrink-0",children:t+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 mb-2 leading-relaxed",children:s.definition}),s.synonyms&&s.synonyms.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mt-1",children:"Synonyms:"}),s.synonyms.map((l,d)=>e.jsx("span",{className:"bg-white border border-gray-200 px-2 py-0.5 rounded text-xs text-gray-600 font-medium",children:l},d))]}),s.examples&&s.examples.length>0&&e.jsx("ul",{className:"text-gray-500 italic text-sm pl-3 border-l-2 border-blue-200 space-y-1",children:s.examples.slice(0,3).map((l,d)=>e.jsxs("li",{children:['"',l,'"']},d))})]})]})},t))}),b.idioms&&b.idioms.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(oe,{size:16})," Idioms"]}),e.jsx("div",{className:"space-y-3",children:b.idioms.map((s,t)=>e.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-100",children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm mb-1",children:s.phrase}),e.jsx("p",{className:"text-xs text-gray-600",children:s.definition})]},t))})]}),b.isExisting?e.jsxs("div",{className:"bg-green-50 text-green-700 px-4 py-3 rounded-xl flex items-center justify-center gap-2 font-bold mb-2",children:[e.jsx(te,{size:20})," Already in Library"]}):e.jsxs("button",{onClick:u,className:"w-full bg-oxford-blue text-white py-3.5 rounded-xl font-bold hover:bg-blue-800 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-blue-900/10",children:[e.jsx(ee,{size:20})," Add to Vocabulary"]})]}):null})]})})]})}ie.createRoot(document.getElementById("root")).render(e.jsx(ce.StrictMode,{children:e.jsx(fe,{})}));
